# 데이터 타입

### 데이터 타입의 종류

기본형 : 숫자, 문자열, 불리언, null, undefined, (심볼)

참조형 : 객체, 배열, 함수, 날짜, 정규표현식, (Map, WeakMap, Set, WeakSet)

기본형은 복제 시 값이 담긴 주솟값을 바로 복제하는 반면 참조형은 값이 담긴 주솟값들로 이루어진 묶음을 가리키는 주솟값을 복제

비트와 바이트



현재 자바스크립트는 숫자의 경우 정수형 부동소수형인지 구분하지 않고 64비트, 즉 8바이트를 확보

### 식별자와 변수

`변수`는 변할 수 있는 수

`식별자`는 변수명

변수 영역과 데이터 영역의 분리

변수 생성 시 변수 영역에 값을 직접 대입하지 않고 데이터 저장하기 위한 별도의 메모리 공간을 다시 확보해서 주소를 변수 영역에 저장하는 식임

숫자형 데이터는 64비트의 공간 확보하지만 문자열은 정해진 규격 x

한 글자마다 영어는 1바이트, 한글은 2바이트

문자열은 기존 문자열에 어떤 변환을 가하든 상관 없이 무조건 새로 만들어 별도의 공간에 저장함

바꿀 수 있으면 변수, 바꿀 수 없으면 상수 … 변경 가능성으로 구분

변수와 상수 구분 : 변수 영역 메모리

불변성 여부 구분 : 데이터 영역 메모리

문자열 값도 한 번 만든 값을 바꿀 수 없고, 숫자 값도 다른 값으로 변경할 수 없음. 변경은 새로 만드는 동작을 통해서만 이루어짐. → 불변값의 성질

### 가변값

참조형 데이터는 객체의 변수 영역이 별도로 존재

객체가 별도로 할애한 영역은 변수 영역(가변), 데이터 영역은 기존의 메모리 공간 그대로 활용(불변)

객체는 내용 수정 시 새로운 객체를 만드는 것이 아니라 기존 객체 내부 값만 바꿀 수 있음

더이상 자신의 주소를 참조하는 변수가 하나도 없을 때

참조 카운트 : 어떤 데이터에 대해 자신의 주소를 참조하는 변수의 개수

참조 카운트가 0인 메모리 주소는 가비지 컬렉터의 수거 대상이 됨

### 변수 복사 비교

변수를 복사하는 과정은 기본형 데이터와 참조형 데이터 모두 같은 주소를 바라보게 되는 점에서 동일하나, 데이터 할당 과정에서 차이가 있어 이후 동작에 큰 차이 있음



기본형은 주솟값을 복사하는 과정이 한 번만 이루어지고, 참조형은 한 단계를 더 거치게 된다

변수 복사 이후 값 변경 시 객체 자체를 변경하면 값이 달라진다.

즉 , 참조형 데이터가 ‘가변값’이라고 설명할 때의 ‘가변’은 참조형 데이터 자체를 변경할 경우가 아니라 그 내부의 프로퍼티를 변경할 때만 성립함.

### 불변 객체

값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우 불변 객체 필요



user.name과 user2.name이 동일해짐

changeName 함수를 만들어 새로운 객체를 반환하도록 수정하면 user와 user2가 서로 다른 객체가 되므로 안전하게 변경 전과 후를 비교 가능

### 얕은 복사와 깊은 복사

얕은 복사는 바로 아래 단계의 값만 복사하는 방법

깊은 복사는 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법



(얕은 복사 ex> 중첩된 객체에서 참조형 데이터가 저장된 프로퍼티를 복사할 때 그 주솟값만 복사함→ 해당 프로퍼티에 대해 원본과 사본이 모두 동일한 참조형 데이터의 주소를 가리키게 된다)

원본과 사본 중 어느 쪽을 바꾸더라도 다른 한쪽의 값도 함께 바뀜

user 객체에 직접 속한 프로퍼티에 대해서는 복사해서 완전히 새로운 데이터가 만들어진 반면, 한 단계 더 들어간 urls의 내부 프로퍼티들은 기존 데이터를 그대로 참조

해결: 불변 객체로 만들면 됨

어떤 객체를 복사할 때 객체 내부의 모든 값을 복사해서 완전히 새로운 데이터를 만들고자 할 때, 객체의 프로퍼티 중에서 그 값이 기본형 데이터일 경우에는 그대로 복사하면 되지만 참조형 데이터는 다시 그 내부의 프로퍼티들을 복사해야 함

참조형 데이터가 있을 때마다 재귀적으로 수행해야 깊은 복사를 할 수 있다



(hasOwnProperty 메소드를 활용해 프로토타입 체이닝을 통해 상속된 프로퍼티를 복사하지 않게끔 할 수도 있고, 객체를 JSON 문법으로 표현된 문자열로 전환했다가 다시 JSON 객체로 바꿀 수도 있음, 다만 메소드나 숨겨진 프로퍼티, JSON으로 변경할 수 없는 프로퍼티는 모두 무시)

### undefined 와 null

undefined : 사용자가 명시적으로 지정할 수도 있지만 값이 존재하지 않을 때 JS 엔진이 자동으로 부여

‘비어있는 요소’는 순회와 관련된 많은 배열 메소드의 순회 대상에서 제외됨

사용자가 직접 undefined를 할당한 배열에 대해서는 배열의 모든 요소를 순회해서 결과를 출력

비어있는 요소에 대해서는 어떠한 처리도 하지 않고 건너뜀

사용자가 명시적으로 undefined 부여한 경우

- undefined 자체로 값
- 프로퍼티나 배열의 요소는 고유의 키값이 실존, 순회의 대상이 될 수 있음

비어있는 요소에 접근하려 할 때 반환되는 경우

- 프로퍼티나 배열의 키값(인덱스) 자체가 존재하지 않음

비어있음을 명시적으로 나타내고 싶을 때에는 null을 쓰도록 하자

typeof null이 object로 뜨는 JS 자체 버그가 있다 → 어떤 변수 값이 null인지 판별 위해서 typeof 쓰면 안됨

null과 undefined는 동등 연산자 ==로는 알 수 없고 일치 연산자 ===를 써야 판별 가능

### 정리

기본적으로 기본형 = 불변값

참조형 = 가변값

변수 : 변경 가능한 데이터 담길 수 있는 공간

식별자 : 그 변수의 이름

불변 객체

undefined와 null
