
## this

this는 실행 컨텍스트가 생성될 때 함께 생성됨. = this는 함수를 호출할 때 결정됨
#

### 🔘전역 공간에서의 this

  전역 공간에서의 this는 전역 객체를 가리킨다. 

  브라우저 환경에서 전역객체는 window, Node.js 환경에서는 global.

  자바스크립트의 모든 변수는 특정 객체의 프로퍼티로서 동작함.

**전역변수를 선언하면 자바스크립트 엔진은 이를 전역객체의 프로퍼티로 할당하면서 추가적으로 해당 프로퍼티의 configurable 속성(변경 및 삭제 가능성)을 false로 정의**
#

### 🔘메서드로서 호출할 때 그 메서드 내부에서의 this

  함수와 메서드의 차이 : 독립성

  함수는 그 자체로 독립적인 기능 수행, 메서드는 자신을 호출한 대상 객체에 관한 동작 수행

  어떤 함수를 객체의 메서드로서 호출할 경우에만 메서드로 동작하고, 그렇지 않으면 함수로 동작한다.

  ‘함수로서의 호출’ 과 ‘메서드로서 호출’ 구분

  점 또는 대괄호 표기법 - 어떤 함수 호출 시 그 함수 이름 앞 객체가 명시되어 있는 경우 메서드로 호출한 것, 그렇지 않은 모든 경우는 함수로 호출한 것.

  this는 호출한 주체에 대한 정보가 담기므로 점 표기법의 경우 마지막 점 앞에 명시된 객체가 this됨
#

### 🔘함수로서 호출할 때 그 함수 내부에서의 this

  어떤 함수를 함수로서 호출할 경우 this가 지정되지 않아 전역 객체를 가리킴

  this바인딩에 관해서는 함수를 실행하는 당시의 주변 환경 (메서드 내부인지 함수 내부인지 등)은 중요하지 않고, 오직 해당 함수를 호출하는 구문 앞 점 또는 대괄호 표기가 있는지 없는지가 관건

  호출 주체가 없을 때 주변 환경의 this를 그대로 상속받아 사용하고 싶다면? → this 우회

  상위 스코프의 this를 변수에 저장해서 내부함수에서 활용하면 됨
#

**화살표 함수**

  this를 바인딩하지 않는 화살표 함수

  상위 스코프의 this를 그대로 활용할 수 있음
#

### 🔘콜백 함수 호출 시 그 함수 내부에서의 this

  콜백 함수 :  함수 A의 제어권을 다른 함수(또는 메서드) B에게 넘겨주는 경우 함수 A를 콜백 함수라 한다. 제어권을 받은 함수에서 콜백 함수에 별도로 this 가 될 대상 지정한 경우에는 그 대상을 참조하게 됨

#
### 🔘생성자 함수 내부에서의 this

  생성자 함수 - 어떤 공통된 성질을 지니는 객체들을 생성하는 데 사용하는 함수 (자바와 비슷)

  자바스크립트는 함수에 생성자로서의 역할을 함께 부여해서

  new 명령어와 함께 함수를 호출하면 해당 함수가 생성자로서 동작하게 됨

  어떤 함수가 생성자 함수로서 호출된 경우 내부에서의 this는 곧 새로 만들 구체적인 인스턴스 자신
#

### 🔘명시적으로 this 바인딩

  ### call 메서드

    call 메서드는 메서드의 호출 주체인 함수를 즉시 실행하도록 하는 명령

    call 메서드의 첫 번째 인자를 this로 바인딩하고, 이후의 인자들을 호출할 함수의 매개변수로 함

    임의의 객체를 this로 지정할 수 있다.

  ### apply 메서드

    call과 기능적으로 완전히 동일

    두 번째 인자를 **배열**로 받아 그 배열의 요소들을 호출할 함수의 매개변수로 지정
  #

### 🔘call / apply 활용

  유사배열객체에 배열 메서드 적용

  객체에는 배열 메서드를 직접 적용할 수 없지만 키가 0 또는 양의 정수인 프로퍼티가 존재하고 length 프로퍼티의 값이 0 또는 양의 정수인 객체 (유사배열객체) 는 call 또는 apply 메서드를 이용해 배열 메서드를 차용할 수 있다

  slice 메서드를 이용하면 매개변수를 아무것도 넘기지 않았을 때 원본 배열의 얕은 복사본 반환

  slice가 배열 메서드이기 때문에 복사본은 배열 형태로 반환된다.

  `querySelectorAll` , `getElementsByClassName` 등 노드 선택자로 선택한 결과인 NodeList도 적용 가능

  ES6 부터 유사배열객체 또는 순회 가능한 모든 종류이 데이터 타입을 배열로 전환하는 `Array.from` 메서드 새로 도입

  여러 개의 인수를 받는 메서드에게 하나의 배열로 인수들을 전달하고 싶을 때 apply 메서드 사용하면 좋음, ES6에서는 펼치기 연산자를 사용하면 간단
  #

펼치기 연산자

```jsx
const numbers = [10, 20, 3, 16, 45];
const max = Math.max(...numbers);
const min = Math.min(...numbers);
console.log(max, min);
```


#
### 🔘bind 메서드

  ES5에서 추가된 기능

  call과 비슷하지만 즉시 호출하지는 않고 넘겨받은 this 및 인수들을 바탕으로 새로운 함수를 반환하기만 하는 메서드

  다시 새로운 함수를 호출할 때 인수를 넘기면 그 인수들은 기존 bind 메서드를 호출할 때 전달했던 인수들의 뒤에 이어서 등록됨
#

**함수에 this를 미리 적용하는 것, 부분 적용 함수를 구현하는 것**

  bind 메서드를 적용해서 새로 만든 함수는 name 프로퍼티에 ‘bound’ 접두어가 붙음 - 기존 call이나 apply보다 코드를 추적하기 수월하다

  콜백 함수를 인자로 받는 함수나 메서드 중에서 기본적으로 콜백 함수 내에서의 this에 관여하는 함수 또는 메서드에 대해서도 bind 메서드를 이용하면 this 값을 사용자가 바꾸어 사용 가능

#
### 🔘화살표 함수의 예외사항

  this 바인딩하는 과정이 제외, this에 접근하고자 하면 스코프체인상 가장 가까운 this에 접근

  화살표 함수 이용 시 this우회 / call / apply / bind 따로 적용할 필요 x , 편리하다
#

### 🔘별도의 인자로 this를 받는 경우 (콜백 함수 내에서의 this)

  콜백 함수를 인자로 받는 메서드 중 일부는 추가로 this로 지정할 객체를 인자로 지정할 수 있는 경우가 있는데, 이 경우 객체값을 지정하면 콜백 함수 내부에서 this값을 원하는대로 변경 가능

  여러 내부 요소에 대해 같은 동작을 반복 수행해야 하는 배열 메서드에 많이 쓰임
#

---

### 😽정리

- 전역공간에서의 this는 전역객체를 참조
- 어떤 함수를 메서드로서 호출한 경우 this는 메서드 호출 주체를 참조
- 어떤 함수를 함수로서 호출한 경우 this는 전역객체를 참조
- 콜백 함수 내부에서의 this는 해당 콜백 함수의 제어권을 넘겨받은 함수가 정의한 바에 따르며, 정의하지 않은 경우에는 전역객체 참조
- 생성자 함수에서의 this는 생성될 인스턴스 참조

명시적 this 바인딩

- call, apply 메서드는 this를 명시적으로 지정하면서 함수 또는 메서드 호출
- bind 메서드는 this 및 함수에 넘길 인수를 일부 지정해서 새로운 함수 만듦
- 요소를 순회하면서 콜백 함수를 반복 호출하는 내용의 일부 메서드는 별도의 인자로 this 받기도 함
