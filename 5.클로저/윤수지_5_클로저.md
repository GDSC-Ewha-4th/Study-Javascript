# 5. í´ë¡œì €

## 5-1. í´ë¡œì €ì˜ ì˜ë¯¸ ë° ì›ë¦¬ ì´í•´

### í´ë¡œì €

**â€œA closure is the combination of a function and the lexical environment within which that function was declared.â€** (MDN)

â†’ ì–´ë–¤ í•¨ìˆ˜ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜ì—ì„œë§Œ ë°œìƒí•˜ëŠ” í˜„ìƒ

```jsx
var outer = function() {
  var a = 1;
  var inner = function() {
    return ++a;
  };
  return inner;
};
var outer2 = outer(); // outerì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ì¢…ë£Œ
console.log(outer2()); // 2
console.log(outer2()); // 3
```

- `outer2` ë³€ìˆ˜ëŠ” `outer()`ì˜ ì‹¤í–‰ ê²°ê³¼ì¸ `inner` í•¨ìˆ˜ë¥¼ ì°¸ì¡°
- `outer`ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ í›„ `inner`í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ `inner`í•¨ìˆ˜ì˜ `outerEnvironmentReference`ì¸ outer í•¨ìˆ˜ì˜ `LexicalEnvironment`ì— ì ‘ê·¼í•˜ì—¬ `outer`ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ `a`ë¥¼ ê°€ì ¸ì˜´.
    
    â†’ ê°€ë¹„ì§€ ì»¬ë ‰í„°ëŠ” ì–´ë–¤ ê°’ì„ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ê°€ í•˜ë‚˜ë¼ë„ ìˆë‹¤ë©´ ê·¸ ê°’ì€ ìˆ˜ì§‘ ëŒ€ìƒì— í¬í•¨ì‹œí‚¤ì§€ ì•Šê¸° ë•Œë¬¸
    
   > ğŸ’¡ ìŠ¤í™ìƒìœ¼ë¡œëŠ” ì„ ì–¸ ë‹¹ì‹œì˜ `LexicalEnvironment` ì „ë¶€ë¥¼ GCí•˜ì§€ ì•Šë„ë¡ ë¼ ìˆìœ¼ë‚˜, 2019ë…„ ê¸°ì¤€ìœ¼ë¡œ í¬ë¡¬ì´ë‚˜ Node.js ë“±ì—ì„œ ì‚¬ìš© ì¤‘ì¸ V8 ì—”ì§„ì˜ ê²½ìš° ë‚´ë¶€ í•¨ìˆ˜ì—ì„œ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ë³€ìˆ˜ë§Œ ë‚¨ê²¨ë‘ê³  ë‚˜ë¨¸ì§€ëŠ” GCí•˜ë„ë¡ ìµœì í™”ë¼ ìˆìŠµë‹ˆë‹¤.
    
    
    â†’ ì´ì²˜ëŸ¼ í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ í›„ì—ë„ `LexicalEnvironment`ê°€ ê°€ë¹„ì§€ ì»¬ë ‰í„°ì˜ ìˆ˜ì§‘ ëŒ€ìƒì—ì„œ ì œì™¸ë˜ëŠ” ê²½ìš°ëŠ” ì§€ì—­ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜ê°€ ì™¸ë¶€ë¡œ ì „ë‹¬ëœ ê²½ìš°ê°€ ìœ ì¼
    
    ì¦‰, â€œì–´ë–¤ í•¨ìˆ˜ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜ì—ì„œë§Œ ë°œìƒí•˜ëŠ” í˜„ìƒâ€ì´ë€ â€œì™¸ë¶€ í•¨ìˆ˜ì˜ `LexicalEnvironment`ê°€ ê°€ë¹„ì§€ ì»¬ë ‰íŒ…ë˜ì§€ ì•ŠëŠ” í˜„ìƒâ€
    

í´ë¡œì €ë€ ì–´ë–¤ í•¨ìˆ˜ Aì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ `a`ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜ Bë¥¼ ì™¸ë¶€ë¡œ ì „ë‹¬í•  ê²½ìš° Aì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ ì´í›„ì—ë„ ë³€ìˆ˜ `a`ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” í˜„ìƒì„ ë§í•œë‹¤.

### ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ì™¸ë¶€ë¡œ ì „ë‹¬í•˜ëŠ” ê²½ìš°

- `return`ì„ í†µí•´ ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ê²½ìš°
- ë³„ë„ì˜ ì™¸ë¶€ê°ì²´ì¸ `window` ë©”ì„œë“œì— ì „ë‹¬í•  ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì§€ì—­ë³€ìˆ˜ ì°¸ì¡°
    
    ```jsx
    // (1) setInterval/setTimeout
    (function() {
      var a = 0;
      var intervalId = null;
      var inner = function() {
        if (++a >= 10) {
          clearInterval(intervalId);
        }
        console.log(a);
      };
      intervalId = setInterval(inner, 1000);
    })();
    ```
    
- ë³„ë„ì˜ ì™¸ë¶€ ê°ì²´ì¸ DOMì˜ ë©”ì„œë“œì— ë“±ë¡í•  `handler` í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì§€ì—­ ë³€ìˆ˜ ì°¸ì¡°
    
    ```jsx
    // (2) eventListener
    (function() {
      var count = 0;
      var button = document.createElement('button');
      button.innerText = 'click';
      button.addEventListener('click', function() {
        console.log(++count, 'times clicked');
      });
      document.body.appendChild(button);
    })();
    ```
    

## 5-2. í´ë¡œì €ì™€ ë©”ëª¨ë¦¬ ê´€ë¦¬

- **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜**: ê°œë°œìì˜ ì˜ë„ì™€ ë‹¬ë¦¬ ì–´ë–¤ ê°’ì˜ ì°¸ì¡° ì¹´ìš´íŠ¸ê°€ 0ì´ ë˜ì§€ ì•Šì•„ GCì˜ ìˆ˜ê±° ëŒ€ìƒì´ ë˜ì§€ ì•ŠëŠ” ê²½ìš°
- í´ë¡œì €ëŠ” ì˜ë„ì ìœ¼ë¡œ í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜ë¥¼ ë©”ëª¨ë¦¬ë¥¼ ì†Œëª¨í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨ ë°œìƒí•˜ë¯€ë¡œ, ê·¸ í•„ìš”ì„±ì´ ì‚¬ë¼ì§„ ì‹œì ì—ëŠ” ë”ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì†Œëª¨í•˜ì§€ ì•Šê²Œ ë§Œë“¤ì–´ì¤€ë‹¤.
- ì°¸ì¡° ì¹´ìš´íŠ¸ë¥¼ 0ìœ¼ë¡œ ë§Œë“œëŠ” ë°©ë²•: ì‹ë³„ìì— ì°¸ì¡°í˜•ì´ ì•„ë‹Œ **ê¸°ë³¸í˜• ë°ì´í„°(nullì´ë‚˜ undefined)**ë¥¼ í• ë‹¹í•˜ê¸°

```jsx
// (1) returnì— ì˜í•œ í´ë¡œì €ì˜ ë©”ëª¨ë¦¬ í•´ì œ
var outer = (function() {
  var a = 1;
  var inner = function() {
    return ++a;
  };
  return inner;
})();
console.log(outer());
console.log(outer());
outer = null; // outer ì‹ë³„ìì˜ inner í•¨ìˆ˜ ì°¸ì¡°ë¥¼ ëŠìŒ
```

```jsx
// (2) setIntervalì— ì˜í•œ í´ë¡œì €ì˜ ë©”ëª¨ë¦¬ í•´ì œ
(function() {
  var a = 0;
  var intervalId = null;
  var inner = function() {
    if (++a >= 10) {
      clearInterval(intervalId);
      inner = null; // inner ì‹ë³„ìì˜ í•¨ìˆ˜ ì°¸ì¡°ë¥¼ ëŠìŒ
    }
    console.log(a);
  };
  intervalId = setInterval(inner, 1000);
})();
```

```jsx
// (3) eventListenerì— ì˜í•œ í´ë¡œì €ì˜ ë©”ëª¨ë¦¬ í•´ì œ
(function() {
  var count = 0;
  var button = document.createElement('button');
  button.innerText = 'click';

  var clickHandler = function() {
    console.log(++count, 'times clicked');
    if (count >= 10) {
      button.removeEventListener('click', clickHandler);
      clickHandler = null; // clickHandler ì‹ë³„ìì˜ í•¨ìˆ˜ ì°¸ì¡°ë¥¼ ëŠìŒ
    }
  };
  button.addEventListener('click', clickHandler);
  document.body.appendChild(button);
})();
```

## 5-3. í´ë¡œì € í™œìš© ì‚¬ë¡€

### 5-3-1. ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì™¸ë¶€ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³ ì í•  ë•Œ

#### ì½œë°± í•¨ìˆ˜ë¥¼ ë‚´ë¶€í•¨ìˆ˜ë¡œ ì„ ì–¸í•´ì„œ ì™¸ë¶€ë³€ìˆ˜ë¥¼ ì§ì ‘ ì°¸ì¡°í•˜ëŠ” ë°©ë²•

```jsx
var fruits = ['apple', 'banana', 'peach'];
var $ul = document.createElement('ul'); // (ê³µí†µ ì½”ë“œ)

fruits.forEach(function(fruit) {
  // (A)
  var $li = document.createElement('li');
  $li.innerText = fruit;
  $li.addEventListener('click', function() {
    // (B)
    alert('your choice is ' + fruit);
  });
  $ul.appendChild($li);
});
document.body.appendChild($ul);
```

#### í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  `bind` ë©”ì„œë“œë¡œ ì§ì ‘ ê°’ì„ ë„˜ê²¨ì£¼ëŠ” ë°©ë²•

```jsx
var fruits = ['apple', 'banana', 'peach'];
var $ul = document.createElement('ul');

var alertFruit = function(fruit) {
  alert('your choice is ' + fruit);
};
fruits.forEach(function(fruit) {
  var $li = document.createElement('li');
  $li.innerText = fruit;
  $li.addEventListener('click', alertFruit); // [object MouseEvent]
  $ul.appendChild($li);
});
document.body.appendChild($ul);
alertFruit(fruits[1]);
```

- ì½œë°± í•¨ìˆ˜ì˜ ì¸ìì— ëŒ€í•œ ì œì–´ê¶Œì„ `addEventListener`ê°€ ê°€ì§„ ìƒíƒœì´ë©°, `addEventListener`ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì²« ë²ˆì§¸ ì¸ìì— â€˜ì´ë²¤íŠ¸ ê°ì²´â€™ë¥¼ ì£¼ì…í•˜ê¸° ë•Œë¬¸

```jsx
fruits.forEach(function(fruit) {
  var $li = document.createElement('li');
  $li.innerText = fruit;
  $li.addEventListener('click', alertFruit.bind(null, fruit)); //
  $ul.appendChild($li);
});
```

- `bind` ë©”ì„œë“œë¥¼ í™œìš©í•´ í•´ê²°ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ì´ë ‡ê²Œ í•˜ë©´ ì´ë²¤íŠ¸ ê°ì²´ê°€ ì¸ìë¡œ ë„˜ì–´ì˜¤ëŠ” ìˆœì„œê°€ ë°”ë€ŒëŠ” ì , í•¨ìˆ˜ ë‚´ë¶€ì—ì„œì˜ `this`ê°€ ì›ë˜ì˜ ê·¸ê²ƒê³¼ ë‹¬ë¼ì§€ëŠ” ì ì„ ê°ì•ˆí•´ì•¼ í•œë‹¤.
    

   > ğŸ’¡ `bind` ë©”ì„œë“œì˜ ì²« ë²ˆì§¸ ì¸ìê°€ ìƒˆë¡œ ë°”ì¸ë”©í•  `this`ì¸ë°, ì´ ê°’ì„ ìƒëµí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì¼ë°˜ì ìœ¼ë¡œ ì›ë˜ì˜ `this`ë¥¼ ìœ ì§€í•˜ë„ë¡ í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ë˜í•œ ìœ„ ì˜ˆì œì—ì„œëŠ” ë‘ ë²ˆì§¸ ì¸ìì— ì´ë²¤íŠ¸ ê°ì²´ê°€ ë„˜ì–´ì˜¬ ê²ƒì…ë‹ˆë‹¤.
    

#### ê³ ì°¨í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

- **ê³ ì°¨í•¨ìˆ˜**: í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜

```jsx
var fruits = ['apple', 'banana', 'peach'];
var $ul = document.createElement('ul');

var alertFruitBuilder = function(fruit) {
  return function() {
    alert('your choice is ' + fruit);
  };
};
fruits.forEach(function(fruit) {
  var $li = document.createElement('li');
  $li.innerText = fruit;
  $li.addEventListener('click', alertFruitBuilder(fruit));
  $ul.appendChild($li);
});
document.body.appendChild($ul);
```

- í´ë¦­ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ `alertFruitBuilder` ì•ˆì˜ ìµëª… í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì—´ë¦¬ë©´ì„œ `alertFruitBuilder`ì˜ ì¸ìë¡œ ë„˜ì–´ì˜¨ `fruit`ë¥¼ `outerEnvironmentReference`ì— ì˜í•´ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. `alertFruitBuilder`ì˜ ì‹¤í–‰ ê²°ê³¼ë¡œ ë°˜í™˜ëœ í•¨ìˆ˜ì—ëŠ” í´ë¡œì €ê°€ ì¡´ì¬.

### 5-3-2. ì ‘ê·¼ ê¶Œí•œ ì œì–´(ì •ë³´ ì€ë‹‰)

- **ì •ë³´ ì€ë‹‰**(information hiding)
    - ì–´ë–¤ ëª¨ë“ˆì˜ ë‚´ë¶€ ë¡œì§ì— ëŒ€í•´ ì™¸ë¶€ë¡œì˜ ë…¸ì¶œì„ ìµœì†Œí™”í•´ì„œ ëª¨ë“ˆê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  ìœ ì—°ì„±ì„ ë†’ì´ê³ ì í•˜ëŠ” ê°œë….
    - ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë³€ìˆ˜ ìì²´ì— ì ‘ê·¼ ê¶Œí•œì„ ì§ì ‘ ë¶€ì—¬í•˜ë„ë¡ ì„¤ê³„í•˜ì§€ ì•Šì•˜ì§€ë§Œ í´ë¡œì €ë¥¼ ì´ìš©í•˜ì—¬ í•¨ìˆ˜ ì°¨ì›ì—ì„œ `public`ê³¼ `private`ì„ êµ¬ë¶„í•  ìˆ˜ ìˆìŒ.

```jsx
var createCar = function() {
  var fuel = Math.ceil(Math.random() * 10 + 10); // ì—°ë£Œ(L)
  var power = Math.ceil(Math.random() * 3 + 2); // ì—°ë¹„(km / L)
  var moved = 0; // ì´ ì´ë™ê±°ë¦¬
  return {
    get moved() { // getterë§Œ ë¶€ì—¬ -> ì½ê¸° ì „ìš© ì†ì„± ë¶€ì—¬
      return moved;
    },
    run: function() {
      var km = Math.ceil(Math.random() * 6);
      var wasteFuel = km / power;
      if (fuel < wasteFuel) {
        console.log('ì´ë™ë¶ˆê°€');
        return;
      }
      fuel -= wasteFuel;
      moved += km;
      console.log(km + 'km ì´ë™ (ì´ ' + moved + 'km). ë‚¨ì€ ì—°ë£Œ: ' + fuel);
    },
  };
};
var car = createCar();
```

- í•¨ìˆ˜ ì™¸ë¶€ì— ì œê³µí•˜ê³ ì í•˜ëŠ” ì •ë³´ë¥¼ ëª¨ì•„ì„œ `return`í•˜ê³ , ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ì •ë³´ëŠ” `return`í•˜ì§€ ì•ŠëŠ”  ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼ ê¶Œí•œ ì œì–´ ê°€ëŠ¥
- `return`í•œ ë³€ìˆ˜ â†’ `public` / `return`í•˜ì§€ ì•Šì€ ë³€ìˆ˜ â†’ `private`

```jsx
var createCar = function() {
  var fuel = Math.ceil(Math.random() * 10 + 10); // ì—°ë£Œ(L)
  var power = Math.ceil(Math.random() * 3 + 2); // ì—°ë¹„(km / L)
  var moved = 0; // ì´ ì´ë™ê±°ë¦¬
  var publicMembers = {
    get moved() {
      return moved;
    },
    run: function() {
      var km = Math.ceil(Math.random() * 6);
      var wasteFuel = km / power;
      if (fuel < wasteFuel) {
        console.log('ì´ë™ë¶ˆê°€');
        return;
      }
      fuel -= wasteFuel;
      moved += km;
      console.log(km + 'km ì´ë™ (ì´ ' + moved + 'km). ë‚¨ì€ ì—°ë£Œ: ' + fuel);
    },
  };
  Object.freeze(publicMembers);
  return publicMembers;
};
var car = createCar();
```

- ì´ì „ ì˜ˆì œì—ì„œ `run` ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ë‚´ìš©ìœ¼ë¡œ ë®ì–´ì”Œìš°ëŠ” ì–´ë·°ì§•ê¹Œì§€ ë§‰ê¸° ìœ„í•´ì„œëŠ” ê°ì²´ë¥¼ `return`í•˜ê¸° ì „ì— ë¯¸ë¦¬ ë³€ê²½í•  ìˆ˜ ì—†ê²Œë” ìœ„ì™€ ê°™ì´ ì¡°ì¹˜ë¥¼ ì·¨í•´ì¤„ ìˆ˜ ìˆë‹¤.

#### í´ë¡œì €ë¥¼ í™œìš©í•´ ì ‘ê·¼ ê¶Œí•œì„ ì œì–´í•˜ëŠ” ë°©ë²•

1. í•¨ìˆ˜ì—ì„œ ì§€ì—­ë³€ìˆ˜ ë° ë‚´ë¶€í•¨ìˆ˜ ë“±ì„ ìƒì„±í•œë‹¤.
2. ì™¸ë¶€ì— ì ‘ê·¼ ê¶Œí•œì„ ì£¼ê³ ì í•˜ëŠ” ëŒ€ìƒë“¤ë¡œ êµ¬ì„±ëœ ì°¸ì¡°í˜• ë°ì´í„°(ëŒ€ìƒì´ ì—¬ëŸ¿ì¼ ë•ŒëŠ” ê°ì²´ ë˜ëŠ” ë°°ì—´, í•˜ë‚˜ì¼ ë•ŒëŠ” í•¨ìˆ˜)ë¥¼ `return`í•œë‹¤.
    
    â†’ `return`í•œ ë³€ìˆ˜ë“¤ì€ ê³µê°œ ë©¤ë²„(`public`)ê°€ ë˜ê³ , ê·¸ë ‡ì§€ ì•Šì€ ë³€ìˆ˜ë“¤ì€ ë¹„ê³µê°œ ë©¤ë²„(`private`)ê°€ ëœë‹¤.
    

### 5-3-3. ë¶€ë¶„ ì ìš© í•¨ìˆ˜

#### **ë¶€ë¶„ ì ìš© í•¨ìˆ˜(partially applied function)**

nê°œì˜ ì¸ìë¥¼ ë°›ëŠ” í•¨ìˆ˜ì— ë¯¸ë¦¬ mê°œì˜ ì¸ìë§Œ ë„˜ê²¨ ê¸°ì–µì‹œì¼°ë‹¤ê°€, ë‚˜ì¤‘ì— (n-m)ê°œì˜ ì¸ìë¥¼ ë„˜ê¸°ë©´ ë¹„ë¡œì†Œ ì›ë˜ í•¨ìˆ˜ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆê²Œë” í•˜ëŠ” í•¨ìˆ˜

```jsx
var add = function() {
  var result = 0;
  for (var i = 0; i < arguments.length; i++) {
    result += arguments[i];
  }
  return result;
};
var addPartial = add.bind(null, 1, 2, 3, 4, 5);
console.log(addPartial(6, 7, 8, 9, 10)); // 55
```

- bind ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„ ê°€ëŠ¥í•˜ì§€ë§Œ, thisì˜ ê°’ì„ ë³€ê²½í•´ì•¼ í•¨.

```jsx
var partial = function() {
  var originalPartialArgs = arguments;
  var func = originalPartialArgs[0];
  if (typeof func !== 'function') {
    throw new Error('ì²« ë²ˆì§¸ ì¸ìê°€ í•¨ìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤.');
  }
  return function() {
    var partialArgs = Array.prototype.slice.call(originalPartialArgs, 1);
    var restArgs = Array.prototype.slice.call(arguments);
    return func.apply(this, partialArgs.concat(restArgs));
  };
};

var add = function() {
  var result = 0;
  for (var i = 0; i < arguments.length; i++) {
    result += arguments[i];
  }
  return result;
};
var addPartial = **partial(add, 1, 2, 3, 4, 5);**
console.log(addPartial(6, 7, 8, 9, 10)); // 55

var dog = {
  name: 'ê°•ì•„ì§€',
  greet: partial(function(prefix, suffix) {
    return prefix + this.name + suffix;
  }, 'ì™ˆì™ˆ, '),
};
dog.greet('ì…ë‹ˆë‹¤!'); // ì™ˆì™ˆ, ê°•ì•„ì§€ì…ë‹ˆë‹¤.
```

- `partial`í•¨ìˆ˜ì˜ ì²« ë²ˆì§¸ ì¸ìë¡œ ì›ë³¸ í•¨ìˆ˜, ë‘ ë²ˆì§¸ ì¸ì ì´í›„ë¶€í„° ë¯¸ë¦¬ ì ìš©í•  ì¸ìë“¤ì„ ì „ë‹¬í•˜ê³ , ë°˜í™˜ í•¨ìˆ˜ì—ì„œ ë‚˜ë¨¸ì§€ ì¸ìë“¤ì„ ëª¨ì•„(`concat`) ì›ë³¸ í•¨ìˆ˜(`func`)ë¥¼ í˜¸ì¶œ
- ë¶€ë¶„ ì ìš© í•¨ìˆ˜ì— ë„˜ê¸¸ ì¸ìë¥¼ ë°˜ë“œì‹œ ì•ì—ì„œë¶€í„° ì°¨ë¡€ë¡œ ì „ë‹¬í•´ì•¼ í•¨

```jsx
Object.defineProperty(window, '_', {
  value: 'EMPTY_SPACE',
  writable: false,
  configurable: false,
  enumerable: false,
});

var partial2 = function() {
  var originalPartialArgs = arguments;
  var func = originalPartialArgs[0];
  if (typeof func !== 'function') {
    throw new Error('ì²« ë²ˆì§¸ ì¸ìê°€ í•¨ìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤.');
  }
  return function() {
    var partialArgs = Array.prototype.slice.call(originalPartialArgs, 1);
    var restArgs = Array.prototype.slice.call(arguments);
    **for (var i = 0; i < partialArgs.length; i++) {
      if (partialArgs[i] === _) {
        partialArgs[i] = restArgs.shift();
      }
    }**
    return func.apply(this, partialArgs.concat(restArgs));
  };
};

var add = function() {
  var result = 0;
  for (var i = 0; i < arguments.length; i++) {
    result += arguments[i];
  }
  return result;
};
var addPartial = partial2(add, 1, 2, _, 4, 5, _, _, 8, 9);
console.log(addPartial(3, 6, 7, 10)); // 55

var dog = {
  name: 'ê°•ì•„ì§€',
  greet: partial2(function(prefix, suffix) {
    return prefix + this.name + suffix;
  }, 'ì™ˆì™ˆ, '),
};
dog.greet(' ë°°ê³ íŒŒìš”!'); // ì™ˆì™ˆ, ê°•ì•„ì§€ ë°°ê³ íŒŒìš”!
```

- ì „ì—­ ê°ì²´ì— `_` ë¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì¤€ë¹„í•˜ì—¬ â€˜ë¹„ì›Œë†“ìŒâ€™ì„ í‘œì‹œ
    
   > ğŸ’¡ ES6ì˜ `Symbol.for`
    ì „ì—­ ì‹¬ë³¼ê³µê°„ì— ì¸ìë¡œ ë„˜ì–´ì˜¨ ë¬¸ìì—´ì´ ì´ë¯¸ ìˆìœ¼ë©´ í•´ë‹¹ ê°’ì„ ì°¸ì¡°í•˜ê³ , ì„ ì–¸ë¼ ìˆì§€ ì•Šìœ¼ë©´ ìƒˆë¡œ ë§Œë“œëŠ” ë°©ì‹ìœ¼ë¡œ, ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥í•˜ë©´ì„œ ìœ ì¼ë¬´ì´í•œ ìƒìˆ˜ë¥¼ ë§Œë“¤ê³ ì í•  ë•Œ ì í•©í•˜ë‹¤.
    `var _ = Symbol.for(â€™EMPTY_SPACEâ€™);`
    
    
- ì²˜ìŒì— ë„˜ê²¨ì¤€ ì¸ìë“¤ ì¤‘ `_` ë¡œ ë¹„ì›Œë†“ì€ ê³µê°„ë§ˆë‹¤ ë‚˜ì¤‘ì— ë„˜ì–´ì˜¨ ì¸ìë“¤ì´ ì°¨ë¡€ëŒ€ë¡œ ë¼ì›Œë„£ë„ë¡ êµ¬í˜„

â†’ ë¯¸ë¦¬ ì¼ë¶€ ì¸ìë¥¼ ë„˜ê²¨ë‘ì–´ ê¸°ì–µí•˜ê²Œë” í•˜ê³  ì¶”í›„ í•„ìš”í•œ ì‹œì ì— ê¸°ì–µí–ˆë˜ ì¸ìë“¤ê¹Œì§€ í•¨ê»˜ ì‹¤í–‰í•˜ê²Œ í•¨ : í´ë¡œì € ì´ìš©

```jsx
var debounce = function(eventName, func, wait) {
  var timeoutId = null;
  return function(event) {
    var self = this;
    console.log(eventName, 'event ë°œìƒ');
    clearTimeout(timeoutId);
    timeoutId = setTimeout(func.bind(self, event), wait);
  };
};

var moveHandler = function(e) {
  console.log('move event ì²˜ë¦¬');
};
var wheelHandler = function(e) {
  console.log('wheel event ì²˜ë¦¬');
};
document.body.addEventListener('mousemove', debounce('move', moveHandler, 500));
document.body.addEventListener(
  'mousewheel',
  debounce('wheel', wheelHandler, 700)
);
```

- **ë””ë°”ìš´ìŠ¤**: ì§§ì€ ì‹œê°„ ë™ì•ˆ ë™ì¼í•œ ì´ë²¤íŠ¸ê°€ ë§ì´ ë°œìƒí•  ê²½ìš° ì´ë¥¼ ì „ë¶€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ì²˜ìŒ ë˜ëŠ” ë§ˆì§€ë§‰ì— ë°œìƒí•œ ì´ë²¤íŠ¸ì— ëŒ€í•´ í•œ ë²ˆë§Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒìœ¼ë¡œ, í”„ë¡ íŠ¸ ì„±ëŠ¥ ìµœì í™”ì— í° ë„ì›€ì„ ì£¼ëŠ” ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜
    - scroll, wheel, mousemove, resize ë“±ì— ì ìš©í•˜ê¸° ì¢‹ìŒ
- ìœ„ ì˜ˆì œì—ì„œ `debounce` í•¨ìˆ˜ëŠ” í´ë¡œì €ë¡œ `EventListener`ì— ì˜í•´ í˜¸ì¶œë  í•¨ìˆ˜ë¥¼ ë°˜í™˜
- `wait` ì‹œê°„ì´ ê²½ê³¼í•˜ê¸° ì´ì „ì— ë™ì¼í•œ `event`ê°€ ë°œìƒí•˜ë©´ ì•ì„œ ì €ì¥í–ˆë˜ ëŒ€ê¸°ì—´ì„ ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ ìƒˆë¡œìš´ ëŒ€ê¸°ì—´ì„ ë“±ë¡ â†’ ë§ˆì§€ë§‰ì— ë°œìƒí•œ ì´ë²¤íŠ¸ë§Œì´ ì´ˆê¸°í™”ë˜ì§€ ì•Šê³  ì‹¤í–‰ëœë‹¤.

### 5-3-4. ì»¤ë§ í•¨ìˆ˜

#### ì»¤ë§ í•¨ìˆ˜(curring function)

- ì—¬ëŸ¬ ê°œì˜ ì¸ìë¥¼ ë°›ëŠ” í•¨ìˆ˜ë¥¼ í•˜ë‚˜ì˜ ì¸ìë§Œ ë°›ëŠ” í•¨ìˆ˜ë¡œ ë‚˜ëˆ ì„œ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œë  ìˆ˜ ìˆê²Œ ì²´ì¸ í˜•íƒœë¡œ êµ¬ì„±í•œ ê²ƒ
- í•œ ë²ˆì— í•˜ë‚˜ì˜ ì¸ìë§Œ ì „ë‹¬ë°›ëŠ” ê²ƒì„ ì›ì¹™
- ì¤‘ê°„ ê³¼ì •ìƒì˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ëŠ” ê·¸ë‹¤ìŒ ì¸ìë¥¼ ë°›ê¸° ìœ„í•´ ëŒ€ê¸°ë§Œ í•  ë¿, ë§ˆì§€ë§‰ ì¸ìê°€ ì „ë‹¬ë˜ê¸° ì „ê¹Œì§€ëŠ” ì›ë³¸ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
    - ë¶€ë¶„ ì ìš© í•¨ìˆ˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ì¸ìë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆê³ , ì‹¤í–‰ ê²°ê³¼ë¥¼ ì¬ì‹¤í–‰í•  ë•Œ ì›ë³¸ í•¨ìˆ˜ê°€ ë¬´ì¡°ê±´ ì‹¤í–‰ëœë‹¤.
- ì¸ìê°€ ë§ì•„ì§ˆìˆ˜ë¡ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê¸° ë•Œë¬¸ì— ES6ì—ì„œëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

```jsx
var curry5 = function(func) {
  return function(a) {
    return function(b) {
      return function(c) {
        return function(d) {
          return function(e) {
            return func(a, b, c, d, e);
          };
        };
      };
    };
  };
};
// ES6
// var curry5 = func => a => b => c => d => e => func(a, b, c, d, e);
var getMax = curry5(Math.max);
console.log(getMax(1)(2)(3)(4)(5));
```

- ê° ë‹¨ê³„ì—ì„œ ë°›ì€ ì¸ìë“¤ì€ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì–´ ìˆë‹¤ê°€ ë§ˆì§€ë§‰ í˜¸ì¶œë¡œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ í›„ì— í•œë²ˆì— GCì˜ ìˆ˜ê±° ëŒ€ìƒì´ ëœë‹¤.
- **ì§€ì—° ì‹¤í–‰(lazy execution)** í”„ë¡œê·¸ë˜ë° í˜¹ì€ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ ìì£¼ ì“°ì´ëŠ” í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ê°€ ì¼ë¶€ë§Œ ë°”ë€ŒëŠ” ê²½ìš°ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë¨

```jsx
var getInformation = function(baseUrl) {
  return function (path) {
    return function (id) {
      return fetch(baseUrl + path + '/' + id);
    }
  }
}
// <ES6>
var getInformation = baseUrl => path => id => fetch(baseUrl + path + '/' + id);

//-------------------------------
var imageUrl = 'http://imageAddress.com/';

var getImage = getInformation(imageUrl); // http://imageAddress.com/
var getEmoticon = getImage('emoticon'); // http://imageAddress.com/emoticon
var getIcon = getImage('icon'); // http://imageAddress.com/icon

var emoticon1 = getEmoticon(100); // http://imageAddress.com/emoticon/100
var icon1 = getIcon(88); // http://imageAddress.com/icon/88
```

## 5-4. ì •ë¦¬

- **í´ë¡œì €**: ì–´ë–¤ í•¨ìˆ˜ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜ë¥¼  ì™¸ë¶€ë¡œ ì „ë‹¬í•  ê²½ìš°, í•¨ìˆ˜ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ í›„ì—ë„ í•´ë‹¹ ë³€ìˆ˜ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” í˜„ìƒ
- ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ì™¸ë¶€ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì—ëŠ” í•¨ìˆ˜ë¥¼ `return`í•˜ëŠ” ê²½ìš° ë¿ë§Œ ì•„ë‹ˆë¼ ì½œë°±ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ê²½ìš°ë„ í¬í•¨
- í´ë¡œì €ëŠ” ë©”ëª¨ë¦¬ë¥¼ ê³„ì† ì°¨ì§€í•˜ëŠ” ê°œë…ì´ë¯€ë¡œ ë”ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê²Œ ëœ í´ë¡œì €ì— ëŒ€í•´ì„œëŠ” ë©”ëª¨ë¦¬ë¥¼ ì°¨ì§€í•˜ì§€ ì•Šë„ë¡ **ê´€ë¦¬**í•´ì¤„ í•„ìš”ê°€ ìˆìŒ
